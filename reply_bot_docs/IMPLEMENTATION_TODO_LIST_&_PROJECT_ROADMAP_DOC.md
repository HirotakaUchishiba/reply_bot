## 序文

  

本書は、「Slack AI Eメールアシスタント」プロジェクトを実装段階へと移行させるための、網羅的かつ実行可能なタスクリストを定義します。このToDoリストは、既存の設計文書群（要件定義書、実装設計仕様書、テスト仕様書、UXデザインドキュメント等）で確立された原則と仕様に完全準拠しており、開発チームが参照すべき具体的な作業項目とその推奨される実行順序を示します。                                                                                

---

## I. インフラストラクチャ / Infrastructure as Code (IaC)

  

このセクションは、アプリケーションが稼働するためのAWSクラウドインフラ基盤をTerraformを用いてコードとして構築するタスクを含みます。                                                                                    

- [ ] Python Lambdaプロジェクトのディレクトリ構成を初期化する
    
- [ ] requirements.txtを作成し依存関係を固定する
    
- [ ] Terraformバックエンドとプロバイダ・ワークスペースを設定する
    
- [ ] TerraformでIAMロール/ポリシーを定義する（最小権限）
    
- [ ] TerraformでDynamoDBテーブルを作成する（暗号化/TTL）
    
- [ ] TerraformでSQS DLQを作成しLambdaに接続する
    
- [ ] TerraformでSES受信ルールとLambda権限を構成する
    
- [ ] TerraformでAPI Gateway /slack/events をLambdaに統合する
    
- [ ] TerraformでSecrets Managerシークレットを作成する
    
- [ ] TerraformでCloudWatchダッシュボードとアラームを定義する
    
- [ ] PresidioのLambda Layerをビルド/公開し参照する
    
- [ ] SES送信ドメインのSPF/DKIM/DMARCを設定・検証する
    
- [ ] 環境別tfvarsとMakefile/開発スクリプトを追加する
    

---

## II. アプリケーションロジック (AWS Lambda)

  

このセクションは、システムのコアビジネスロジックを担うAWS Lambda関数内の実装タスクを定義します。

- [ ] イベントルーターを実装する（SES/Slack block_actions/view_submission）
    
- [ ] SES受信メールの解析ロジックを実装する（プレーンテキスト抽出）
    
- [ ] DynamoDBリポジトリと状態スキーマを実装する（TTL含む）
    
- [ ] PIIリダクションサブシステムを実装する（Presidio＋pii_map生成）
    
- [ ] OpenAIプロンプトフレームワークとクライアントを実装する
    
- [ ] SlackクライアントとBlock Kitビルダーを実装する
    
- [ ] Slack署名検証と3秒ACK処理を実装する
    
- [ ] 返信生成ハンドラを実装する（AI→再識別→モーダル表示）
    
- [ ] 送信ハンドラを実装する（編集テキスト抽出→SES送信→確認）
    
- [ ] 構造化ロギングと相関ID・メトリクスを実装する
    
- [ ] 失敗時処理と冪等性ガードを実装する（DLQ前提）
    
- [ ] 環境変数/Secrets取得の設定管理層を実装する
    
- [ ] ログのPII混入防止ガードを実装し監査する
    

---

## III. Slack & 外部連携

  

このセクションは、Slackプラットフォームとの連携設定に関するタスクを定義します。

- [ ] Slackアプリ manifest.yml を用意しインポートする
    

---

## IV. CI/CDとテスト

  

このセクションは、品質を保証し、デプロイを自動化するためのパイプラインとテストコードの実装タスクを定義します。                                                                                                        

- [ ] CI/CD（GitHub Actions）を作成する（lint/test/plan/apply）
    
- [ ] ユニットテストを実装する（PII/ルーター/プロンプト）
    
- [ ] 結合テストを実装する（状態書込/読取、Slackペイロード、IAM）
    
- [ ] E2E/パフォーマンステストを実装する（モーダルp95<5秒）
    

---

## V. ドキュメント & 運用

  

このセクションは、プロジェクトの持続可能性と円滑な運用を確保するためのドキュメント整備タスクを定義します。

- [ ] 運用RunbookとREADMEを整備する（DLQ対応含む）
    

---

## VI. 推奨される実装順序 (Proposed Order of Implementation)

  

リスクを早期に発見し、手戻りを最小限に抑えるための、論理的かつ効果的な実装着手順序を以下に提案します。

1. インフラ基盤の確立:
    

- Terraformバックエンド、IAMロール、DynamoDB、DLQ、API Gatewayなど、アプリケーションの土台となるリソースを最初に構築します。                                                                                          
    

2. Lambda骨格と連携インターフェースの実装:
    

- Lambdaのイベントルーターを実装し、Slack署名検証と3秒ACK処理を確立します。
    
- SESとSlackからのイベントを実際に受け取れるようにし、外部システムとの「つなぎこみ」を早期に検証します。
    

3. コアビジネスロジックの実装:
    

- PIIリダクションとAI連携（OpenAIコール）という、システムの核となる機能を実装します。
    

4. 観測性と自動化の整備:
    

- 構造化ロギングやメトリクスを実装し、システムの振る舞いを可視化します。
    
- CI/CDパイプラインを構築し、テストとデプロイのプロセスを自動化します。
    

5. テスト群の拡充:
    

- ユニットテスト、結合テスト、E2Eテストを順次拡充し、システムの品質と堅牢性を網羅的に保証します。
    

**