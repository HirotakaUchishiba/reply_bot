
## 序文

  

本書は、「Slack AI Eメールアシスタント」プロジェクトにおける、詳細かつ戦術的なテストケースを定義するものです。本書は、テスト計画書（QA-TP-001）で概説された高レベルな品質保証戦略を、直接的かつ実行可能な手順へと具体化する役割を担います 3。

本書を貫く基本原則は、**完全なトレーサビリティ（追跡可能性）**です。本書に記載されるすべてのテストケースは、要件定義書 1 に記載された一つ以上の要件に明示的にマッピングされ、実装設計仕様書 2 で詳述された特定のコンポーネントまたはデータフローを検証します。このアプローチにより、すべてのテスト活動がビジネス目標と整合していることを保証し、システムの品質が体系的、再現可能、かつ監査可能な方法で検証されることを確実にします。本書は、QAエンジニアおよび開発者がテストを実行するための、唯一の信頼できる情報源（Single Source of Truth）として機能します。

---

## 第1章: ユニットテストスイート：コアビジネスロジックとサブシステムの検証

  

本章では、アプリケーションコードの最小単位を分離した状態でテストすることに焦点を当てます。これらのテストは、システムの基本的な構成要素が統合される前に、その堅牢性と正確性を保証するための最初の防衛線として機能し、コアロジックにおけるバグの早期発見に不可欠です 3。

  

### 1.1. PIIリダクション・サブシステム (Presidio連携)

  

背景: 実装設計仕様書（セクション2.3）および要件定義書（FR-04, NFR-SEC-01）は、PII（個人識別情報）リダクション・サブシステムを、本システムにおける最も重要なセキュリティコンポーネントとして位置づけています 1。このサブシステムの不具合は、重大なデータ漏洩およびコンプライアンス違反に直結するため、そのユニットテストは極めて網羅的でなければなりません。

テストケース:

  

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|UNIT-PII-ACC-01|PII検出の精度検証|PIIリダクション関数が利用可能であること。|1. 以下の文字列を含む多様な形式のテストデータを関数に渡す: - メールアドレス (test@example.com, test.name+alias@domain.co.uk) - 電話番号 ((555) 123-4567, +1-555-123-4567, 5551234567) - クレジットカード番号|1. すべてのPIIが正しく識別され、プレースホルダー（例: , ）に置換されること。|FR-04, NFR-SEC-01|
|UNIT-PII-MAP-01|pii_map生成の正確性検証|PIIリダクション関数が利用可能であること。|1. 文字列「連絡先は test@example.com です」を関数に渡す。|1. 返される pii_map 辞書が {'': 'test@example.com'} のような正しいキーと値のペアを含んでいること。このマップの完全性は、後の再識別化プロセス（FR-17）に不可欠である 2。|FR-05, FR-17|
|UNIT-PII-EDGE-01|エッジケースのハンドリング|PIIリダクション関数が利用可能であること。|1. 以下の文字列を関数に渡す: - PIIを含まない文字列 - PIIのみで構成される文字列 - 複数のPIIタイプが混在する文字列 - Unicode文字や不正な形式のデータを含む文字列|1. PIIを含まない場合は、文字列と pii_map が空のまま返されること。 2. 混在・不正な形式のデータに対しても、関数がクラッシュせず、識別可能なPIIを適切に処理すること。|FR-04|

  

### 1.2. Lambdaイベントルーターロジック

  

背景: 実装設計仕様書（セクション1.3）で詳述されている「デュアルイングレス（Dual Ingress）」アーキテクチャは、メインのLambda関数内に実装される初期イベントルーターに極めて重要な責務を課します 2。ここでのルーティングエラーは、特定のトリガータイプに対するシステム全体の障害を引き起こすため、システムの中心的な制御フローが正しく機能することを保証する必要があります。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|UNIT-ROUTER-SES-01|SESイベントのディスパッチ検証|イベントルーター関数が利用可能であること。|1. SESからのメール受信イベントを模したJSONペイロードをルーターに渡す。|1. handle_new_email ロジックパスが呼び出されたことをアサートする。これはアーキテクチャ図（Image 1）のステップ3に対応するフローを検証する。|FR-02|
|UNIT-ROUTER-BA-01|Slack block_actions イベントのディスパッチ検証|イベントルーター関数が利用可能であること。|1. Slackのボタンクリックを模した block_actions ペイロードをルーターに渡す。|1. handle_generate_reply_click ロジックパスが呼び出されたことをアサートする。これはアーキテクチャ図（Image 1）のステップ7のフローを検証する。|FR-12, FR-13|
|UNIT-ROUTER-VS-01|Slack view_submission イベントのディスパッチ検証|イベントルーター関数が利用可能であること。|1. Slackのモーダル送信を模した view_submission ペイロードをルーターに渡す。|1. handle_send_email_submission ロジックパスが呼び出されたことをアサートする。これはアーキテクチャ図（Image 1）のステップ15のフローを検証する。|FR-22, FR-23|
|UNIT-ROUTER-INVALID-01|不正なイベントのハンドリング|イベントルーター関数が利用可能であること。|1. 未知または不正な形式のイベントペイロードをルーターに渡す。|1. 関数がクラッシュするのではなく、適切にエラーをログに記録し、正常に終了すること。|NFR-REL-01|

  

### 1.3. AIプロンプトエンジニアリング・フレームワーク

  

背景: AIが生成する返信の品質は、OpenAI APIに渡されるプロンプトの品質に完全に依存します。実装設計仕様書（セクション2.1）では、このための構造化されたフレームワークが定義されています 2。これらのテストは、プロンプト生成ロジックがこの契約を遵守し、一貫性のある高品質な入力を保証することを検証します。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|UNIT-PROMPT-STRUCT-01|プロンプト構造の正確性検証|プロンプト生成関数が利用可能であること。|1. 特定のシナリオID（例: BUG_REPORT_ACK）、リダクション済みのユーザー入力、ペルソナ定義を関数に渡す。|1. 最終的なプロンプト文字列が、指定された ### 区切り文字を用いて、指示、文脈、ユーザー入力を正しく組み立てていることをアサートする。|FR-15|
|UNIT-PROMPT-API-01|OpenAI APIコントラクトへの準拠検証|プロンプト生成関数が利用可能であること。|1. 関数を呼び出し、OpenAI APIコール用のリクエストペイロードを生成させる。|1. 生成されたペイロードが、実装設計仕様書（セクション2.2）で定義されたJSON構造と完全に一致することをアサートする。これには、正しいモデル名（gpt-4o）、ロール（user）、およびコスト管理のための max_tokens パラメータの存在確認が含まれる。|FR-16|

---

## 第2章: 結合テストスイート：コンポーネントとサービスの連携

  

本章では、コンポーネント間の「つなぎ目」を検証するテストを詳述します。ユニットテストがコンポーネントの単体動作を保証するのに対し、結合テストは、それらがステージング環境の実際のAWSサービスを介して、正しく通信しデータを交換できることを保証します 3。

  

### 2.1. デュアルイングレス・ワークフローと状態管理

  

背景と分析: 「デュアルイングレス」アーキテクチャは、本システムで最も複雑かつリスクの高い機能です。SESによって非同期にトリガーされる実行と、API Gatewayによって同期的にトリガーされる実行との間の状態引き継ぎに失敗した場合、ユーザーのワークフローは致命的なエラーとなります。pii_map を含むコンテキストは外部の状態ストア（DynamoDB）を介して渡されるため、この連携は結合テストの最重要ターゲットとなります 2。これは単に2つのフローをテストするのではなく、それらの間を繋ぐ決定的に重要な「橋」を検証するものです。この状態引き継ぎの失敗は、再識別化（

FR-17）や最終的なメール送信（FR-25）を不可能にします。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|INT-STATE-WRITE-01|状態の永続化（書き込みパス）検証|ステージング環境のSES、Lambda、DynamoDBがデプロイ済みであること。|1. SESで設定されたサポート用メールアドレスにテストメールを送信する。 2. AWS SDKまたはコンソールを使用し、DynamoDBテーブルを直接クエリする。|1. 正しい context_id を持つアイテムが作成されていること。 2. アイテム内に、送信者アドレス、件名、そして極めて重要な pii_map を含む、シリアライズされた完全なコンテキストが保存されていること。これはアーキテクチャ図（Image 1）のステップ1-5を検証する。|FR-07, NFR-REL-03|
|INT-STATE-READ-01|状態の取得（読み取りパス）検証|ステージング環境のAPI Gateway、Lambda、DynamoDBがデプロイ済みであること。|1. DynamoDBに有効なコンテキストアイテム（context_id と pii_map を含む）を手動で挿入する。 2. API Gatewayエンドポイントに対し、対応する context_id を含む block_actions ペイロードを模したHTTPリクエストを送信する。|1. Lambda関数がDynamoDBからコンテキストを正常に取得し、デシリアライズできること。 2. 取得したコンテキストに基づいて後続の処理（この場合はOpenAIへのコール準備）が開始されることをログで確認する。これはアーキテクチャ図（Image 1）のステップ7-8を検証する。|FR-14, NFR-REL-03|

  

### 2.2. IAMとセキュリティ設定

  

背景: 非機能要件 NFR-SEC-03 は、最小権限の原則への準拠を要求しています 1。実装設計仕様書（セクション4.3）のTerraformコードはIAMロールを定義しますが、それが実際の環境で意図通りに機能することを証明するためにはテストが必要です 2。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|INT-IAM-ALLOW-01|許可されたアクションの検証|テスト対象のIAM実行ロールがステージング環境にデプロイされていること。|1. 対象の実行ロールを使用するテスト用Lambda関数から、以下のすべてのアクションを実行する: - CloudWatch Logsへのログ書き込み - 対象DynamoDBテーブルへのアイテムのPut/Get - Secrets Managerからのシークレット取得 - SES経由でのメール送信|1. すべてのアクションが成功すること。|NFR-SEC-03|
|INT-IAM-DENY-01|拒否されたアクションの検証|テスト対象のIAM実行ロールがステージング環境にデプロイされていること。|1. 対象の実行ロールを使用するテスト用Lambda関数から、以下の禁止されたアクションを実行する: - 別のDynamoDBテーブルへのアクセス - SQS DLQの削除 - 無関係なシークレットへのアクセス|1. すべてのアクションがアクセス拒否エラーで失敗すること。|NFR-SEC-03|

  

### 2.3. 外部APIコントラクトへの準拠

  

背景: 実装設計仕様書（セクション3.1, 3.2）は、SlackのBlock Kit用の厳格なJSON構造と、モーダル入力用の静的IDを定義しています 2。これらは厳格な契約として扱われ、アプリケーションがその契約を遵守していることを保証するためのテストが必要です。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|INT-SLACK-MODAL-01|Slack views.open ペイロード検証|ステージング環境が稼働中であること。|1. 「返信文を生成する」フローをトリガーする。 2. モックまたはプロキシを用いて、Slackの views.open APIエンドポイントに送信されるペイロードを傍受・検査する。|1. ペイロードのJSON構造が、実装設計仕様書（セクション3.1）の「返信生成・編集モーダル」の定義と完全に一致すること。これには、正しい callback_id、静的な block_id (editable_reply_block) および action_id (editable_reply_input) の検証が含まれる。|FR-18, FR-19|
|INT-SLACK-NOTIFY-01|Slack chat.postMessage ペイロード検証|ステージング環境が稼働中であること。|1. 新規メール受信フローをトリガーする。 2. chat.postMessage APIに送信されるペイロードを傍受・検査する。|1. ペイロードのJSON構造が、実装設計仕様書（セクション3.1）の「Eメール受信通知メッセージ」の定義と完全に一致すること。|FR-08, FR-09|

---

## 第3章: エンドツーエンド（E2E）テストスイート：ビジネスワークフローの検証

  

本スイートは、システムをブラックボックスとして扱い、ユーザーの視点から完全なビジネスシナリオを検証します。これらのテストは、システムが要件定義書 1 で記述された価値を提供していることの最終的な確認となります。

  

### 3.1. プライマリワークフローシナリオ（正常系）

  

背景: これらのテストは、要件定義書でペルソナ「ヒロタカ」のために定義されたユーザーストーリー（US-01 から US-06）に直接対応します 1。UIのスクリーンショット（Image 2）に示されているような、エラーのない完璧なシステムの流れをシミュレートします。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|E2E-HAPPY-PATH-01|問い合わせから返信までの完全なフロー|ステージング環境が稼働中であること。テスト用の送受信メールアカウントが利用可能であること。|1. サポート用メールアドレスにメールを送信する。 2. Slackで通知メッセージが表示されることを確認する (US-01, US-02)。 3. 「返信文を生成する」ボタンをクリックする (US-03)。 4. AIが生成したドラフトを含むモーダルが表示されることを確認する。 5. モーダル内のドラフトテキストを編集する (US-04)。 6. モーダルを送信し、メールを送信する (US-05)。 7. Slackで送信完了メッセージが表示されることを確認する (US-06)。 8. 元の送信者の受信トレイで、最終的に編集されたメールが受信されることを確認する。|1. すべてのステップがエラーなく完了し、最終的なメールの内容がステップ5で編集した通りであること。|US-01 - US-06|

  

### 3.2. PIIデータライフサイクル検証

  

背景と分析: これは、機能の正当性とセキュリティおよびコンプライアンス要件（NFR-SEC-01, NFR-COM-01, NFR-COM-02）の検証を組み合わせた、極めて重要なE2Eテストです。このテストは、UIレベルの検証を超え、システムの品質保証に対する成熟したアプローチを示すために、オブザーバビリティ・フレームワークを中核的なテストツールとして活用します。PIIがOpenAIに送信されていないことや、ログに記録されていないことをユーザー視点から証明することは不可能です。これを証明する唯一の方法は、システムの内部状態を検査することです。実装設計仕様書（セクション5.3）は、相関ID（Correlation ID）を持つ構造化ロギングを規定しています 2。したがって、完全なE2Eテストには、このIDを捕捉し、それを用いてCloudWatchのログを監査し、コンプライアンスの具体的な証拠を提供するステップが含まれなければなりません。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|E2E-PII-001|PIIの匿名化・再識別化ライフサイクル|ステージング環境が稼働中であること。CloudWatch Logsへのアクセス権があること。|1. 固有のPII（例: pii.test.123@example.com）を含むメールを送信する。 2. Slack通知が表示された後、Lambda実行の初期CloudWatchログエントリから correlation_id を捕捉する。 3. 生成、編集、送信のワークフロー全体を完了させる。 4. UI検証: Slackモーダルと最終的に受信したメール内で、PIIが正しく再識別化されていることを確認する。 5. バックエンド検証: CloudWatch Logs Insightsを使用し、捕捉した correlation_id を持つすべてのログをクエリする。|1. UI上ではPIIが正しく表示されること。 2. クエリ結果のどのログエントリにも、生のPII文字列（pii.test.123@example.com）が含まれていないこと。 3. 特に、OpenAI APIへのリクエストを記録したログエントリに、プレースホルダー（例: [EMAIL_1]）が含まれていることをアサートする。|FR-04, FR-17, NFR-SEC-01, NFR-COM-01, NFR-COM-02|

  

### 3.3. ビジネスルールとエッジケースシナリオ

  

背景: これらのテストは、一般的ではないが重要な条件下でのシステムの振る舞いを検証します。これには、ビジネスルールとして現れる技術的な制約の検証も含まれます。

テストケース:

  

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|E2E-TTL-01|DynamoDB TTLの有効期限切れ|ステージング環境が稼働中であること。DynamoDBのTTL値がテスト用に短い時間（例: 5分）に設定されていること。|1. サポート用メールアドレスにメールを送信する。 2. 設定されたTTLの期間よりも長く待機する（例: 6分）。 3. Slack通知内の「返信文を生成する」ボタンをクリックする。|1. システムがクラッシュするのではなく、Slack UI内で一時的なエラーメッセージが表示されるなど、適切に失敗すること。これはTTLが単なるガベージコレクションではなく、「ユーザーはX時間以内に応答しなければならない」というビジネスルールとして機能することを検証する 2。|NFR-REL-03|
|E2E-BODY-EDGE-01|長文・空のメール本文のハンドリング|ステージング環境が稼働中であること。|1. 非常に長い本文を持つメールを送信する。 2. 空の本文を持つメールを送信する。|1. いずれの場合もシステムがクラッシュせず、ワークフローが正常に進行すること（例: 長文の場合は抜粋が表示され、空の場合はその旨が示される）。|FR-03|

---

## 第4章: 障害・回復性テストスイート

  

本章は、意図的に障害を発生させることでシステムの堅牢性を証明することに特化しています。データ損失を防ぎ、依存関係にあるサービスが失敗した場合でも良好なユーザー体験を維持するという、重要な信頼性要件（NFR-REL）を直接検証します 1。

  

### 4.1. 非同期処理の失敗（DLQ検証）

  

背景: 非機能要件 NFR-REL-01 は、受信メールイベントの損失ゼロを義務付けています 1。実装設計仕様書（セクション4.1）で設定されたデッドレターキュー（DLQ）は、これを達成するためのメカニズムです 2。このテストは、このセーフティネットが機能することの決定的な証拠を提供します。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|FAIL-DLQ-001|Lambdaリトライ失敗後のDLQへの転送|ステージング環境のLambdaとSQS DLQが設定済みであること。|1. Lambda関数のコードを一時的に変更し、実行開始時に無条件でエラーをスローするようにしてデプロイする。 2. テストメールをサポート用アドレスに送信する。 3. Lambdaサービスのデフォルトリトライが完了するのに十分な時間（例: 数分）待機する。 4. AWSステージングアカウントのSQSコンソールに移動する。 5. 指定されたDLQ（AsyncProcessingDLQ）内のメッセージ数が1増加していることを確認する。 6. DLQ内のメッセージを検査し、そのペイロードが元の未処理のSESイベントであることを確認する。|1. 処理に失敗したイベントが失われることなく、DLQに確実に捕捉されること。|NFR-REL-01|

  

### 4.2. 外部サービス停止のシミュレーション

  

背景: システムはOpenAIおよびSlackのAPIに依存しています 1。このテストは、それらのサービスの障害をシミュレートし、システムが適切に機能低下（Graceful Degradation）することを保証します。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|FAIL-OPENAI-01|OpenAI APIの障害|ネットワークプロキシまたはモックサーバーが利用可能であること。|1. OpenAI APIのエンドポイントが 503 Service Unavailable エラーを返すように設定する。 2. 「返信文を生成する」ボタンをクリックする。|1. システムがクラッシュしないこと。 2. 代わりに、Slack UI内でユーザーに情報を提供するエラーメッセージ（例: モーダル内または一時的なメッセージで「AIの応答を取得できませんでした」）が表示されること。|NFR-REL-02|
|FAIL-SLACK-01|Slack APIの障害|ネットワークプロキシまたはモックサーバーが利用可能であること。|1. Slackの views.open APIがエラーを返すように設定する。 2. 「返信文を生成する」ボタンをクリックする。|1. Lambda関数がエラーを捕捉し、それをログに記録して、クラッシュせずに正常に終了すること。|NFR-REL-02|

---

## 第5章: 非機能要件の検証

  

本章には、標準的なビジネスワークフローの一部ではないものの、システムの成功に不可欠な主要な品質特性を検証するために設計されたテストが含まれています。

  

### 5.1. パフォーマンスとレイテンシ

  

背景: 非機能要件 NFR-PER-01 は、モーダルがリクエストの95%において5秒未満で表示されなければならないという厳格なパフォーマンス目標を設定しています 1。このテストは、この要件を測定し、検証します。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|PERF-MODAL-01|モーダル表示のp95レイテンシ測定|自動化されたテストスクリプト環境がセットアップ済みであること。|1. Slack APIを介して「返信文を生成する」ボタンクリックをトリガーし、バックエンドからの views.open コール受信までの時間（または完全な往復時間）を測定するスクリプトを準備する。 2. このスクリプトを短期間に100回実行する。 3. すべてのレイテンシ測定値を収集する。 4. 結果の95パーセンタイル（p95）値を計算する。 5. p95値が5000ミリ秒未満であることをアサートする。|1. p95レイテンシが5秒の目標値を下回ること。|NFR-PER-01|

  

### 5.2. セキュリティとコンプライアンス監査

  

背景と分析: 本セクションは、一度設定すれば変更されることは少ないものの、監査が必要なセキュリティ構成とコンプライアンスルールを形式的に検証します。これには、ビジネス上極めて重要なSESの送信レピュテーションに関するテストも含まれます。実装設計仕様書（セクション5.3）およびテスト計画書（セクション2.2）は、SESのレピュテーション（Reputation.BounceRate, Reputation.ComplaintRate）を、アプリケーション全体を無効化しかねない主要なビジネスリスクとして強調しています 2。苦情率を直接テストすることはできませんが、良好なレピュテーションを維持するための前提条件である技術的な設定（

NFR-SEC-05で要求されるSPF, DKIM, DMARC）を検証することは可能です。これは、リスク駆動型の予防的なテストアプローチを実証するものです。

テストケース:

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|テストケースID|テストタイトル|前提条件|テスト手順|期待される結果|関連要件|
|AUDIT-ENCRYPTION-01|保存データの暗号化（Encryption at Rest）|AWSステージング環境への読み取り専用アクセス権があること。|1. ステージング用のDynamoDBテーブルのコンソールに移動する。 2. テーブルの設定を検査し、「保存時の暗号化」がAWS管理キーを使用して有効になっていることを確認するスクリーンショットを提供する。|1. 暗号化が有効になっていることが確認されること。|NFR-SEC-04|
|AUDIT-DOMAIN-AUTH-01|ドメイン認証レコード|インターネットアクセスとDNSクエリツール（例: nslookup, MXToolbox）が利用可能であること。|1. 送信ドメイン（your-reply-domain.com）のDNSレコードを外部ツールでクエリする。 2. 有効な SPF、DKIM、および DMARC レコードが存在することを確認する。|1. 3つの認証レコードすべてが正しく設定されていることが確認されること。|NFR-SEC-05|

---

## 付録A: 要件追跡マトリクス (Requirements Traceability Matrix - RTM)

  

分析: 本マトリクスは、本書の集大成であり、包括的なテストカバレッジの最終的な証拠を提供します。これは、すべての関連文書で強調されているトレーサビリティの原則を具現化した、具体的な成果物です 1。この表は単なる管理上の作業ではありません。これは強力なプロジェクト管理ツールです。プロジェクトマネージャーは、特定のビジネス目標や要件の検証状況を一目で把握できます。例えば、テストケース

E2E-PII-001 で重大なバグが発見された場合、このマトリクスは、それが FR-04、NFR-SEC-01、そして最終的にはセキュリティとコンプライアンスという基本的なビジネスニーズに影響を与えることを即座に示します。これにより、リリース可否に関する情報に基づいたリスクベースの意思決定が可能となり、テストを単なる「合否判定」活動から、ビジネスリスクの定量的測定へと昇華させます。

|   |   |   |   |
|---|---|---|---|
|要件ID|要件概要|テストケースID|テストレベル|
|BG-01, BG-02|効率性・生産性の向上|PERF-MODAL-01, E2E-HAPPY-PATH-01|NFR, E2E|
|BG-03|品質の改善|E2E-HAPPY-PATH-01|E2E|
|BG-04|ユーザー満足度|E2E-HAPPY-PATH-01|E2E|
|US-01|Slackでの新規問い合わせ通知|E2E-HAPPY-PATH-01|E2E|
|US-02|Slack通知での文脈情報確認|E2E-HAPPY-PATH-01|E2E|
|US-03|ワンクリックでのAIドラフト生成|E2E-HAPPY-PATH-01|E2E|
|US-04|AIドラフトのレビューと編集|E2E-HAPPY-PATH-01|E2E|
|US-05|Slackからのシームレスな送信|E2E-HAPPY-PATH-01|E2E|
|US-06|Slackでの送信完了確認|E2E-HAPPY-PATH-01|E2E|
|FR-01 - FR-03|メールの取り込みと処理|UNIT-ROUTER-SES-01, E2E-HAPPY-PATH-01|Unit, E2E|
|FR-04, FR-05|PIIリダクションとpii_map生成|UNIT-PII-ACC-01, UNIT-PII-MAP-01, E2E-PII-001|Unit, E2E|
|FR-06, FR-07|状態管理とDynamoDBへの永続化|INT-STATE-WRITE-01|Integration|
|FR-08 - FR-11|Slack通知とボタン|INT-SLACK-NOTIFY-01, E2E-HAPPY-PATH-01|Integration, E2E|
|FR-12 - FR-14|ボタンクリックと状態取得|UNIT-ROUTER-BA-01, INT-STATE-READ-01|Unit, Integration|
|FR-15, FR-16|プロンプト構築とOpenAIコール|UNIT-PROMPT-STRUCT-01, UNIT-PROMPT-API-01|Unit|
|FR-17 - FR-22|HITLインターフェース（モーダル）|INT-SLACK-MODAL-01, E2E-HAPPY-PATH-01|Integration, E2E|
|FR-23 - FR-27|メールの発送と確認|UNIT-ROUTER-VS-01, E2E-HAPPY-PATH-01|Unit, E2E|
|NFR-SEC-01|PIIリダクション精度|UNIT-PII-ACC-01|Unit|
|NFR-SEC-02|シークレット管理|INT-IAM-ALLOW-01|Integration|
|NFR-SEC-03|最小権限|INT-IAM-ALLOW-01, INT-IAM-DENY-01|Integration|
|NFR-SEC-04|データ暗号化|AUDIT-ENCRYPTION-01|NFR (Audit)|
|NFR-SEC-05|ドメイン認証|AUDIT-DOMAIN-AUTH-01|NFR (Audit)|
|NFR-REL-01|データ損失防止 (DLQ)|FAIL-DLQ-001|Failure|
|NFR-REL-02|冪等性・障害耐性|FAIL-OPENAI-01, FAIL-SLACK-01|Failure|
|NFR-REL-03|状態の永続性|INT-STATE-WRITE-01, INT-STATE-READ-01, E2E-TTL-01|Integration, E2E|
|NFR-PER-01|モーダル表示遅延|PERF-MODAL-01|NFR (Performance)|
|NFR-COM-01|PIIのログ記録禁止|E2E-PII-001|E2E|
|NFR-COM-02|PIIの第三者への送信禁止|E2E-PII-001|E2E|
